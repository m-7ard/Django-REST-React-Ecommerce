@use './global' as *;

#root {
    overflow: hidden;
}

.app {
    @include flex-column(0, 0);
    @include absolute-boundary(0, 0, 0, 0);
    margin: 0 auto;
    color: #0A0908;

    &__divider {
        border-top: 1px solid map-get($light, dark);
        height: 0px;
    }

    &__header {
        @include flex-column(0, 0);
    }

    &__go-to {
        @include base-button;
        @include flex-column(0, 0);
        align-items: center;
        font-size: get-font-size(secondary, small);
        color: map-get($black, dark);
        font-weight: 500;
    }

    &__header-section {
        @include flex-row($space-medium $space-large, $space-large);
        align-items: center;

        &--top {
            background-color: snow;
            justify-content: flex-end;;
        }

        &--bottom {
            border-bottom: 1px solid map-get($light, dark);
            background-color: snow;
        }

        &--main {
            background-color: $orange;
            justify-content: center;
        }
    }

    &__header-group {
        @include flex-row(0, $space-large);
        align-items: center
    }

    &__header-link {
        @include base-button;
        font-size: get-font-size(secondary, medium);
        
        &:hover {
            text-decoration: underline;
        }
    }

    &__header-search-bar {
        display: flex;
        max-width: 49rem;
        gap: inherit;
        flex: 1;
    }

    &__header-search-widget {
        @include flex-row(0, 0);
        overflow: hidden;
        flex-grow: 1;
        height: 100%;
    }

    &__header-search-field {
        @include flex-row(0, 0);
        border-radius: $radius-medium 0 0 $radius-medium;
        overflow: hidden;
        flex-grow: 1;
        border: 1px solid map-get($light, dark);
        box-sizing: border-box;
        background-color: map-get($light, light);

        [data-role="input"] {
            @include medium-button;
            border-radius: 0;
            position: relative;
            background-color: transparent;
            flex-grow: 1;

            input {
                @include absolute-boundary(0, 0, 0, 0);
                @include ellipsis;
                padding: $space-small;
            }
        }
    }

    &__header-search-button {
        @include base-button;
        @include medium-button;
        @include colors-from-theme($gunmetal_theme, neutral, $hover: active);
        border-radius: 0 $radius-medium $radius-medium 0;
    }

    &__header-category-select {
        @media only screen and (max-width: 500px) {
            display: none;
        }

        $theme: $gunmetal_theme;
        
        &[data-state="open"] [data-role="root"] {
            border-radius: $radius-medium $radius-medium 0 0;
        }

        [data-role="root"] {
            @include base-button;
            @include medium-button;
            @include colors-from-theme($theme, neutral, $hover: active);
            width: 9rem;        
            box-sizing: border-box;
        }

        [data-role="option-list"] {
            min-width: 9rem;          
            overflow: hidden;
            border-radius: 0 0 $radius-small;  
            box-sizing: border-box;
        }

        [data-role="option"] {
            @include base-button;
            @include medium-button;
            @include colors-from-theme($theme, neutral, $hover: active, $checked: active);
            border-radius: 0px;
            
            border: 1px solid transparent;
            box-sizing: border-box;
            &:has(:checked) {
                border: 1px solid get_theme_attr($theme, inactive, bg);
            }
        }
    }

    &__logo {
        @include base-button;
        color: map-get($light, light);
    }

    &__icon {
        color: #0A0908;
    }

    &__body {
        @include flex-row($space-large, $space-large);
        flex-grow: 1;
    }
}

.frontpage {
    @include flex-column(0, $space-large);
    flex-grow: 1;
    overflow: hidden;

    &__header {
        @include flex-row($space-large, 0);
        justify-content: space-between;
        align-items: center;
    }

    &__title {
        font-size: get-font-size(primary, large);
        font-weight: bold;
        color: map-get($black, dark);
    }

    &__link {
        font-size: get-font-size(secondary, medium);
        color: blue;
    }

    
    &__recent-ads {
        gap: $space-large;
        max-width: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }

    &__main {
        @include flex-column(0, $space-large);
    }

    &__gallery {
        @include flex-column($space-large, $space-large);
        background-color: snow;
        border: 1px solid map-get($light, dark);
        width: 100%;
        box-sizing: border-box;

        &-title {
            font-size: get-font-size(primary, medium);
            font-weight: bold;
            color: map-get($black, dark);
        }

        &-divider {
            border-top: 1px solid map-get($light, dark);
            height: 0px;
        }

        &-header {
            display: grid;
            grid-template: auto / 1fr auto auto;
            gap: $space-medium;
            align-items: center;
        }

        &-content {
            @include flex-row($space-small, $space-large);
            border-right: $space-small solid transparent;
            overflow: auto;

            &::-webkit-scrollbar {
                background-color: transparent;
                height: 0px;
            }    
        }

        &-control {
            @include base-button;
            border: 1px solid map-get($light, dark);
            border-radius: $radius-medium;
        }
    }

    &__highlight {
        @include flex-row(0, $space-large);
        flex-wrap: wrap;
        justify-content: center;

        &-box {
            @include flex-column($space-large, $space-large);
            background-color: snow;
            border: 1px solid map-get($light, dark); 
            flex: 1 0 0;
            overflow: hidden;
            min-width: 15rem;
        }

        &-header {
            @include flex-row(0, 0);
            align-items: center;
            justify-content: space-between;
        }

        &-item {
            display: grid;
            grid-template: repeat(4, auto) / 4rem 1fr;
            gap: 0 $space-large;
            overflow: hidden;
        }

        &-image {
            background-color: snow;
            aspect-ratio: 1 / 1;
            grid-row: 1 / -1;
            border: 1px solid map-get($light, dark); 
        }

        &-title {
            font-size: get-font-size(primary, small);
            font-weight: 700;
            color: map-get($black, dark);
        }

        &-link {
            font-size: get-font-size(secondary, small);
            color: blue;
        }

        &-label {
            @include ellipsis;
            overflow: hidden;
            font-size: get-font-size(secondary, small);
            font-weight: 500;
            color: map-get($black, dark);

            &--main {
                font-weight: 700;
            }
        }

        &-price {
            font-size: get-font-size(secondary, medium);
            font-weight: 700;
            color: $red;
        }

        &-divider {
            border-top: 1px solid map-get($light, dark);
            height: 0px;
        }
    }

    &__ad {
        @include flex-column($space-large $space-large $space-large $space-large, $space-large);
        @include has-shadow;
        background-color: $orange;
        position: relative;
        flex-shrink: 0;

        &--featured {
            width: 7rem;
        }

        &--normal {
            @media only screen and (min-width: 500px) {
                width: 5rem;
            }

            @media only screen and (min-width: 600px) {
                width: 6rem;
            }
        }

        &-image {
            width: 100%;
            aspect-ratio: 1 / 1;
            border: 1px solid map-get($light, dark);
            background-color: snow;
        }

        &-title {
            @include ellipsis;
            font-size: get-font-size(secondary, large);
            color: map-get($black, dark);
            font-weight: 700;
        }

        &-price {
            @include ellipsis;
            font-size: get-font-size(secondary, medium);
            color: map-get($black, light);
            font-weight: 500;
        }

        &-pricetag {
            @include has-shadow;
            @include base-button;
            @include small-button;
            background-color: $red;
            color: snow;
            font-size: get-font-size(secondary, medium);
            font-weight: 700;
            position: absolute;
            top: $space-small;
            right: $space-small;
            user-select: none;
        }
    }
}

.account {
    @include flex-row(0, 0);
    flex: 1;

    &__auth {
        @include flex-column($space-large, $space-large);
        background-color: snow;
        border: 1px solid map-get($light, dark);
        flex: 1;
        max-width: 40rem;
        margin: 0 auto;

        .form__body {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
    }

    &__title {
        font-size: get-font-size(primary, large);
        font-weight: 500;
        color: map-get($black, dark);
    }
}

[data-role="select"] {
    &[data-state="open"] {
        [data-role="option-list"] {
            visibility: visible;
        }

        [data-role="marker"] {
            transform: rotate(0);
        }
    }

    [data-role="marker"] {
        transform: rotate(-90deg);
    }

    [data-role="label"] {
        @include ellipsis;
    }

    [data-role="option-list"] {
        @include flex-column(0, 0);
        position: fixed;
        visibility: hidden;
        overflow: auto;
        z-index: 2; 
    }
    
    [data-role="option"] {
        @include base-button;
        @include input-replacement;
    }
}

.form {
    @include flex-column(0, $space-large);

    &__body {
        @include flex-column(0, $space-large);
        padding-top: $space-large;
    }

    &__header {
        @include flex-row($space-large, $space-large);
        justify-content: center;
    }

    &__title {
        font-size: get-font-size(primary, large);
        font-weight: 700;
        color: map-get($black, dark);
    }

    &__field {
        @include flex-column(0, $space-small);
    }

    &__error {
        font-size: get-font-size(secondary, medium);
        font-weight: 500;
        color: $red;

        &::before {
            content: '•';
            margin-right: $space-small;
        }
    }

    &__label {
        font-size: get-font-size(secondary, medium);
        font-weight: 500;
        color: map-get($black, dark);
    }

    &__char-input {
        @include medium-button;
        @include ellipsis;
        width: 100%;
        box-sizing: border-box;
        padding: $space-medium-large;
        border: 1px solid map-get($light, dark);
        background-color: map-get($light, light);
    }

    &__pill-select-widget {
        @include flex-row(0, $space-large);
        justify-content: space-around;
        flex-wrap: wrap;

        [data-role="option"] {
            @include base-button;
            @include medium-button;
            @include input-replacement;
            gap: $space-large;
            padding: $space-large;
            border: 1px solid map-get($light, dark);
            color: map-get($black, dark);
            font-weight: 500;
            
            &:has(:checked) .icon {
                border: 1px solid map-get($black, light);
                background-color: map-get($black, light);
            }
        }

        .icon {
            @include default-color-transition;
            border: 2px solid map-get($light, dark);
            border-radius: 9999px;
        }
    }

    &__submit {
        @include base-button;
        @include large-button;
        @include colors-from-theme($gunmetal_theme, neutral, $hover: active);
        margin-left: auto;
        width: fit-content;
        font-weight: 400;

    }
}